<!DOCTYPE html>
<html lang="de" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Meme-Generator mit Drag & Drop</title>
    <!-- Externes CSS einbinden -->
    <link rel="stylesheet" th:href="@{/css/style.css}" />
</head>
<body>

<h1>Erstelle dein Meisterwerk</h1>

<div class="main-container">
    <!-- MEME-CONTAINER (Bild + Overlays) -->
    <div class="meme-container" id="memeContainer">
        <img th:src="@{${memePath}}"
             id="memeImage"
             alt="Meme wird geladen..." />
    </div>

    <!-- RECHTE SPALTE: Eingabefelder & Buttons -->
    <div class="controls">
        <!-- Button zum Hinzufügen eines neuen Textfeldes -->
        <button onclick="addTextField()">Beschrifte mich !</button>

        <!-- Container für die dynamischen Textfelder -->
        <div id="textFieldContainer"></div>

        <!-- Update-Button entfernt – Aktualisierung erfolgt automatisch -->
        <button id="abgebenButton" onclick="this.disabled = true; saveMeme()">Abgeben</button>

        <div class="bottom-buttons">
            <button onclick="window.location.reload();">Gib mir was neues!</button>
            <button onclick="downloadMeme()">Meme downloaden</button>
        </div>
    </div>
</div>

<!-- Canvas zum Erstellen des Download-Bildes (versteckt) -->
<canvas id="memeCanvas" width="600" height="400" style="display:none;"></canvas>

<!-- JavaScript-Dateien einbinden -->
<script th:src="@{/js/globals.js}"></script>
<script th:src="@{/js/makeDraggable.js}"></script>
<script th:src="@{/js/addTextField.js}"></script>
<script th:src="@{/js/updateMeme.js}"></script>
<script th:src="@{/js/drawMemeWithText.js}"></script>
<script th:src="@{/js/downloadMeme.js}"></script>
<script th:src="@{/js/onload.js}"></script>
<script th:src="@{/js/save.js}" defer></script>
</body>
</html>